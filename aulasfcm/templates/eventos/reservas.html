{% include "header.html" %}
<html>

    <head>
        {# Cargamos libreria bootstrap #}
        {% load bootstrap4 %}
        {# Cargamos bootstrap css #}
        {% bootstrap_css %}
        {# Archivos #}
        {% load static %}

        <style>
        .left {
            float: left;
            margin-bottom: 1%;
            }

            .right {
            float: right;
            margin-bottom: 1%;
            margin-right: 1%;
            }

            .right-m {
            float: right;
            margin-bottom: 1%;
            margin-right: 1%;
            }

            .right-crear {
            /* float: right; */
            /* margin-bottom: 1%; */
            margin-right: 2%;
            border-radius: 25px;
            }

            .btn-info{
                background-color: #09cca6;
            }
  
        </style>
    </head>

    <body>
        {# JS y jquery bootstrap #}
        {% bootstrap_javascript jquery='full' %}
        <!-- Body del template -->
        <div>
            <form method="post" enctype="multipart/form-data" action="/eventos/reservas">
            {% csrf_token %}
            <div class="form-inline" style="margin-left: 1%;"> <!-- para centrar, agregar: style="margin-bottom: 1%; margin: auto;width: 50%;" -->
                <!-- DROPDOWN AULAS -->
                <div class="form-group"> <!-- Dropdown de aulas -->
                    <label for="aulas" style="font-weight:bold;" class="control-label">Aula: </label>
                    <select class="form-control" name="aula" required>
                        {% if not aula_selected %}
                            <option hidden selected value> -- Seleccione aula -- </option>
                            {% for a in aulas %}
                                <option value="{{a.id}}">{{a.nombre}}</option>
                            {% endfor %}
                        {% else %}
                            {% for a in aulas %}
                                {% if a.id == aula_selected.id %}
                                    <option selected value="{{a.id}}">{{a.nombre}}</option>
                                {% else %}
                                    <option value="{{a.id}}">{{a.nombre}}</option>
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    </select>
                </div>
                <!-- DROPDOWN ENTIDAD -->
                <div class="form-group" style="margin-right: 1%;margin-left: 1%;"> <!-- Dropdown de entidades -->
                    <label for="entidades" style="font-weight:bold;" class="control-label">Entidad: </label>
                    <select class="form-control" name="entidad">
                        {% if not entidad_selected %}
                            <option hidden selected value> -- Seleccione entidad -- </option>
                            {% for e in entidades %}
                                <option value="{{e.id}}">{{e.nombre}}</option>
                            {% endfor %}
                        {% else %}
                            {% for e in entidades %}
                                {% if e.id == entidad_selected.id %}
                                    <option selected value="{{e.id}}">{{e.nombre}}</option>
                                {% else %}
                                    <option value="{{e.id}}">{{e.nombre}}</option>
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    </select>
                </div>
                <button class="btn btn-primary" type="post" >Buscar</button>
            </div>
        </form>
        </div>

        <!-- RESULTADOS -->
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th width="35%">Titulo</th>
                <th>Hora Inicio</th>
                <th>Hora Fin</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            
            <!-- Recorremos los objetos -->
            {% for e in object_list %}
            <tr>
                <td>{{ e.title }}</td>
                <td>{{e.dia_start}} {{ e.start_time | date:"d/m/Y" }}, {{e.start_time|time:"h:i a"}}</td>
                <td>{{e.dia_end}} {{ e.end_time | date:"d/m/Y" }}, {{e.end_time|time:"h:i a"}}</td>
                <td>
                    {% if user.is_authenticated %}
                    <!-- Botones de borrado -->
                    <a class="btn-sm btn-info right-crear" data-toggle="tooltip" data-placement="bottom" title="Borrar este evento" style="cursor:pointer; text-decoration: none;">X</a> 
                    <a class="btn-sm btn-info right-crear" data-toggle="tooltip" data-placement="bottom" title="Borrar este evento y sus relacionados" style="cursor:pointer;" ><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill="white"><path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914a.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/><path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/></g></svg></a> 
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        
            </tbody>
        </table>


    </body>
</html>